@using MudBlazor
@using LinqStudio.Core.Models
@using LinqStudio.Core.Services

<MudDialog>
	<DialogContent>
		<MudTextField @bind-Value="_projectName" 
					  Label="Project Name" 
					  Required="true"
					  Immediate="true"
					  HelperText="Enter a name for your project" 
					  HelperTextOnFocus="true" />
		
		<MudTextField @bind-Value="_connectionString" 
					  Label="Connection String" 
					  Class="mt-4"
					  HelperText="Database connection string (optional)"
					  HelperTextOnFocus="true"
					  AutoGrow
					  MaxLines="3" />
	</DialogContent>
	<DialogActions>
		<MudButton OnClick="Cancel">Cancel</MudButton>
		<MudButton Color="Color.Primary" 
				   Variant="Variant.Filled" 
				   OnClick="Create"
				   Disabled="@string.IsNullOrWhiteSpace(_projectName)">
			Create
		</MudButton>
	</DialogActions>
</MudDialog>

@code {
	[CascadingParameter] 
	IMudDialogInstance MudDialog { get; set; } = null!;

	private string _projectName = string.Empty;
	private string _connectionString = string.Empty;

	private void Cancel() => MudDialog.Cancel();

	private void Create()
	{
		// Return tuple with name and connection string
		MudDialog.Close(DialogResult.Ok((_projectName, _connectionString)));
	}
}